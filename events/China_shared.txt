###########################
# Shared Chinese Events
###########################

add_namespace = china_events

###########################
### ATTACK NOTIFICATION ###
###########################

country_event = { #Generic war notification
	id = china_events.0
	title = {
		text = china_events.0.t.target
		trigger = {
			NOT = { FROM = { is_ally_with = ROOT } }
		}
	}
	title = {
		text = china_events.0.t.ally_of_target
		trigger = {
			FROM = { is_ally_with = ROOT }
		}
	}

	desc = {
		text = china_events.0.d.target
		trigger = {
			NOT = { FROM = { is_ally_with = ROOT } }
		}
	}
	desc = {
		text = china_events.0.d.ally_of_target
		trigger = {
			FROM = { is_ally_with = ROOT }
		}
	}

	picture = GFX_report_event_CHI_intelligence

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.0 option china_events.0.a"
		name = china_events.0.a
		if = {
			limit = { NOT = { FROM = { is_ally_with = ROOT } } }
			every_other_country = {
				limit = {
					is_ally_with = ROOT
					is_ai = no
				}
				country_event = china_events.0
			}
		}
	}
}

#########################
### DEMAND SUBMISSION ###
#########################

country_event = { #FROM demands ROOT submit
	id = china_events.1
	title = china_events.1.t
	desc = china_events.1.d
	picture = GFX_report_event_QIE_soldiers_planning

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.1 option china_events.1.a"
		name = china_events.1.a #Yes
		trigger = {
			china_is_potential_government = no
			china_is_unaligned = yes
			is_subject = no
		}
		ai_chance = {
			base = 20			
			modifier = {
				factor = 0
				###check if they are HNN and have LKMT or RKMT ones
				tag = HNN
				OR = {
					AND = { #check for RKMT
						has_game_rule = { rule = HNN_PATH option = HNN_KMT_RIGHT }
						FROM = { is_ruled_by_right_kmt = no }
					}
					AND = { #check for LKMT
						NOT = { has_game_rule = { rule = HNN_PATH option = HNN_KMT_LEFT } }
						FROM = { is_ruled_by_left_kmt = no }
					}
				}
			}
			modifier = {
				factor = 0
				###check if they have NPA path
				FROM = { china_is_unaligned = no }
				OR = {
					AND = { #check for GXC
						tag = GXC
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA }
					}
					AND = { #check for SZC
						tag = SZC
						has_game_rule = { rule = SZC_PATH option = SZC_Industrial_NPA }
					}
				}
			}
			modifier = {
				factor = 0
				###check for YUN rules
				tag = YUN
				NOT = { has_game_rule = { rule = YUN_PATH option = DEFAULT } }
				OR = {
					AND = { #check for Feds
						has_game_rule = { rule = YUN_PATH option = YUN_federalist }
						FROM = { is_ruled_by_federalists = no }
					}
					#outright refuse if have following
					has_game_rule = { rule = YUN_PATH option = YUN_larp_rule }
					has_game_rule = { rule = YUN_PATH option = YUN_isolationist }
					has_game_rule = { rule = YUN_PATH option = YUN_long_yun_isolationist }
				}
			}
			modifier = {
				factor = 0
				###check for GXC rules
				tag = GXC
				NOT = { has_game_rule = { rule = GXC_PATH option = DEFAULT } }
				OR = {
					#check for expansionist GXC
					has_game_rule = { rule = GXC_PATH option = GXC_PATH_EXPANSIONISM }
					AND = { #check for zhili
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_PATAUT_QIE }
						has_country_leader = { name = "Ma Ji" ruling_only = yes }
						FROM = { is_ruled_by_pro_zhili = no }
					}
					AND = { #check for NPA
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA }
						OR = {
							has_country_leader = { name = "Ma Ji" ruling_only = yes }
							has_country_leader = { name = "Chen Lianbo" ruling_only = yes }
						}
						FROM = { china_is_unaligned = no }
					}
					#outright refuse if have following
					AND = {
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_MARLIB_JAP }
						has_country_leader = { name = "Chen Lianbo" ruling_only = yes }
					}
				}
			}
			modifier = {
				factor = 0
				#Guominjun Shanxi never submits to QIE - traitors to Zhili and hates Monarchy
				tag = SHX
				has_country_flag = SHX_Feng_in_power
				FROM = { tag = QIE }
			}
			modifier = {
				factor = 0
				china_is_unaligned = no
				china_compatible_alignment_to_FROM = no
			}
			modifier = {
				factor = 2
				has_opinion = { target = FROM value > 99 }
			}
			modifier = {
				factor = 1.2
				strength_ratio = { tag = FROM ratio < 1 }
			}
			modifier = {
				factor = 2
				strength_ratio = { tag = FROM ratio < 0.75 }
			}
		}
		FROM = {
			effect_tooltip = { china_puppet_ROOT_effect = yes }
			country_event = { id = china_events.2 hours = 8 }
		}
	}

	option = {
		log = "[GetLogInfo]: event china_events.1 option china_events.1.b"
		name = china_events.1.b #No
		trigger = {
			china_is_potential_government = no
			china_is_unaligned = yes
		}
		ai_chance = {
			base = 80
			modifier = {
				factor = 0.01 #so there will be a chance to pick this if path set
				FROM = { enemies_strength_ratio < 1 }
				strength_ratio = { tag = FROM ratio < 0.5 }
			}
			modifier = {
				factor = 0
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 1.2
				strength_ratio = { tag = ROOT ratio > 1 }
			}
			modifier = {
				factor = 2
				strength_ratio = { tag = ROOT ratio > 1.5 }
			}
			modifier = {
				factor = 10
				strength_ratio = { tag = ROOT ratio > 2 }
			}
			modifier = {
				factor = 0.5
				has_opinion = { target = FROM value > 199 }
			}
			modifier = {
				factor = 0.75
				has_opinion = { target = FROM value > 149 }
			}
			modifier = {
				factor = 0.75
				has_opinion = { target = FROM value > 49 }
			}
		}
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		custom_effect_tooltip = may_lead_to_war_with_FROM
		FROM = {
			country_event = { id = china_events.3 hours = 8 }
		}
	}

	option = {
		log = "[GetLogInfo]: event china_events.1 option china_events.1.c"
		name = china_events.1.c #They are delusional, surely
		trigger = {
			OR = {
				china_is_potential_government = yes
				china_is_unaligned = no
			}
		}
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		custom_effect_tooltip = may_lead_to_war_with_FROM
		FROM = {
			country_event = { id = china_events.3 hours = 8 }
		}
	}
}

country_event = { #FROM submits to ROOT
	id = china_events.2
	title = china_events.2.t
	desc = china_events.2.d
	picture = GFX_report_event_CHI_speech

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.2 option china_events.2.a"
		name = china_events.2.a
		china_puppet_FROM_effect = yes
		clear_decision_attack_AI = yes
		CHI_subject_accceptance_influence_effect = yes
	}
}

country_event = { #FROM refuses to submit to ROOT
	id = china_events.3
	title = china_events.3.t
	desc = china_events.3.d
	picture = GFX_report_event_CHI_warlord_cavalry

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.3 option china_events.3.a"
		name = china_events.3.a #Later
		ai_chance = { factor = 0 }
		add_ai_strategy = {
			type = antagonize
			id = FROM
			value = 200
		}
		activate_targeted_decision = { decision = china_attack_decision target = FROM }
		clear_decision_attack_AI = yes
		CHI_subject_rejection_influence_effect = yes
	}

	option = {
		log = "[GetLogInfo]: event china_events.3 option china_events.3.b"
		name = china_events.3.b #Attack
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				ROOT_is_threatened = yes
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger_FROM = yes }
			}
		}
		create_wargoal = {
			target = FROM
			type = annex_everything
		}
		clear_decision_attack_AI = yes
		CHI_subject_rejection_influence_effect = yes
	}
}

#################
### ALLIANCES ###
#################

country_event = { #FROM wants alliance with ROOT
	id = china_events.4
	title = china_events.4.t
	desc = china_events.4.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.4 option china_events.4.a"
		name = china_events.4.a #Yes
		trigger = {
			FROM = { is_subject = no }
		}
		effect_tooltip = { china_puppet_FROM_effect = yes }
		CHI_subject_accceptance_influence_effect = yes
		FROM = {
			country_event = { id = china_events.5 hours = 8 }
		}
	}

	option = {
		log = "[GetLogInfo]: event china_events.4 option china_events.4.b"
		name = china_events.4.b #No
		ai_chance = { base = 0 }
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		set_country_flag = china_refused_alliance_@FROM
		CHI_subject_rejection_influence_effect = yes
		FROM = {
			if = {
				limit = { china_same_alignment_as_PREV = yes }
				var:country_leader = { clear_variable = china_alignment }
			}
			if = {
				limit = { is_in_array = { china_possible_allies_array = ROOT } }
				remove_from_array = { china_possible_allies_array = ROOT }
			}
			if = {
				limit = { is_in_array = { china_possible_allies_array_northwest = ROOT } }
				remove_from_array = { china_possible_allies_array_northwest = ROOT }
			}
			set_country_flag = china_refused_alliance_@ROOT
			effect_tooltip = {
				add_opinion_modifier = {
					target = FROM
					modifier = small_decrease
				}
			}
			country_event = { id = china_events.6 hours = 8 }
		}
	}
}

country_event = { #FROM accepts alliance with ROOT
	id = china_events.5
	title = china_events.5.t
	desc = china_events.5.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.5 option china_events.5.a"
		name = china_events.5.a
		FROM = { china_puppet_ROOT_effect = yes }
	}
}

country_event = { #FROM refuses alliance with ROOT
	id = china_events.6
	title = china_events.6.t
	desc = china_events.6.d
	picture = GFX_report_event_QIE_wtf

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.6 option china_events.6.a"
		name = china_events.6.a
		add_opinion_modifier = {
			target = FROM
			modifier = small_decrease
		}
		add_ai_strategy = {
			type = contain
			id = FROM
			value = 100
		}
		add_ai_strategy = {
			type = antagonize
			id = FROM
			value = 100
		}
	}
}

country_event = { #FROM invites ROOT to alliance
	id = china_events.7
	title = china_events.7.t
	desc = china_events.7.d
	picture = GFX_report_event_QIE_cardgame

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.7 option china_events.7.a"
		name = china_events.7.a #Yes
		trigger = {
			is_subject = no
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				###check if they are HNN and have LKMT or RKMT ones
				tag = HNN
				OR = {
					AND = { #check for RKMT
						has_game_rule = { rule = HNN_PATH option = HNN_KMT_RIGHT }
						FROM = { is_ruled_by_right_kmt = no }
					}
					AND = { #check for LKMT
						NOT = { has_game_rule = { rule = HNN_PATH option = HNN_KMT_LEFT } }
						FROM = { is_ruled_by_left_kmt = no }
					}
				}
			}
			modifier = {
				add = 10
				###add 1 chance so they will take this if first is not correct
				FROM = { china_is_unaligned = no }
				OR = {
					AND = { #check for GXC
						tag = GXC
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA }
					}
					AND = { #check for SZC
						tag = SZC
						has_game_rule = { rule = SZC_PATH option = SZC_Industrial_NPA }
					}
				}
			}
			modifier = {
				factor = 0
				###check for YUN rules
				tag = YUN
				NOT = { has_game_rule = { rule = YUN_PATH option = DEFAULT } }
				OR = {
					AND = { #check for Feds
						has_game_rule = { rule = YUN_PATH option = YUN_federalist }
						FROM = { is_ruled_by_federalists = no }
					}
					#outright refuse if have following
					has_game_rule = { rule = YUN_PATH option = YUN_larp_rule }
					has_game_rule = { rule = YUN_PATH option = YUN_isolationist }
					has_game_rule = { rule = YUN_PATH option = YUN_long_yun_isolationist }
				}
			}
			modifier = {
				factor = 0
				###check for GXC rules
				tag = GXC
				NOT = { has_game_rule = { rule = GXC_PATH option = DEFAULT } }
				OR = {
					#check for expansionist GXC
					has_game_rule = { rule = GXC_PATH option = GXC_PATH_EXPANSIONISM }
					AND = { #check for zhili
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_PATAUT_QIE }
						has_country_leader = { name = "Ma Ji" ruling_only = yes }
						FROM = { is_ruled_by_pro_zhili = no }
					}
					AND = { #check for NPA
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA }
						OR = {
							has_country_leader = { name = "Ma Ji" ruling_only = yes }
							has_country_leader = { name = "Chen Lianbo" ruling_only = yes }
						}
						FROM = { china_is_unaligned = no }
					}
					#outright refuse if have following
					AND = {
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_MARLIB_JAP }
						has_country_leader = { name = "Chen Lianbo" ruling_only = yes }
					}
				}
			}
		}
		FROM = {
			effect_tooltip = { china_puppet_ROOT_effect = yes }
			country_event = { id = china_events.8 hours = 8 }
		}
	}

	option = {
		log = "[GetLogInfo]: event china_events.7 option china_events.7.b"
		name = china_events.7.b #No
		ai_chance = {
			base = 0
			modifier = {
				add = 10
				###check if they are HNN and have LKMT or RKMT ones
				tag = HNN
				OR = {
					AND = { #check for RKMT
						has_game_rule = { rule = HNN_PATH option = HNN_KMT_RIGHT }
						FROM = { is_ruled_by_right_kmt = no }
					}
					AND = { #check for LKMT
						NOT = { has_game_rule = { rule = HNN_PATH option = HNN_KMT_LEFT } }
						FROM = { is_ruled_by_left_kmt = no }
					}
				}
			}
			modifier = {
				add = 10
				###add 1 chance so they will take this if first is not correct
				FROM = { china_is_unaligned = no }
				OR = {
					AND = { #check for GXC
						tag = GXC
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA }
					}
					AND = { #check for SZC
						tag = SZC
						has_game_rule = { rule = SZC_PATH option = SZC_Industrial_NPA }
					}
				}
			}
			modifier = {
				add = 10
				###check for YUN rules
				tag = YUN
				NOT = { has_game_rule = { rule = YUN_PATH option = DEFAULT } }
				OR = {
					AND = { #check for Feds
						has_game_rule = { rule = YUN_PATH option = YUN_federalist }
						FROM = { is_ruled_by_federalists = no }
					}
					#outright refuse if have following
					has_game_rule = { rule = YUN_PATH option = YUN_larp_rule }
					has_game_rule = { rule = YUN_PATH option = YUN_isolationist }
					has_game_rule = { rule = YUN_PATH option = YUN_long_yun_isolationist }
				}
			}
			modifier = {
				add = 10
				###check for GXC rules
				tag = GXC
				NOT = { has_game_rule = { rule = GXC_PATH option = DEFAULT } }
				OR = {
					#check for expansionist GXC
					has_game_rule = { rule = GXC_PATH option = GXC_PATH_EXPANSIONISM }
					AND = { #check for zhili
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_PATAUT_QIE }
						has_country_leader = { name = "Ma Ji" ruling_only = yes }
						FROM = { is_ruled_by_pro_zhili = no }
					}
					AND = { #check for NPA
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA }
						OR = {
							has_country_leader = { name = "Ma Ji" ruling_only = yes }
							has_country_leader = { name = "Chen Lianbo" ruling_only = yes }
						}
						FROM = { china_is_unaligned = no }
					}
					#outright refuse if have following
					AND = {
						has_game_rule = { rule = GXC_PATH option = GXC_PATH_MARLIB_JAP }
						has_country_leader = { name = "Chen Lianbo" ruling_only = yes }
					}
				}
			}
		}
		set_country_flag = china_refused_alliance_@FROM
		if = {
			limit = { china_same_alignment_as_FROM = yes }
			var:country_leader = { clear_variable = china_alignment }
		}
		if = {
			limit = { is_in_array = { china_possible_allies_array = FROM } }
			remove_from_array = { china_possible_allies_array = FROM }
		}
		if = {
			limit = { is_in_array = { china_possible_allies_array_northwest = FROM } }
			remove_from_array = { china_possible_allies_array_northwest = FROM }
		}
		FROM = {
			set_country_flag = china_refused_alliance_@ROOT
			effect_tooltip = {
				add_opinion_modifier = {
					target = FROM
					modifier = small_decrease
				}
			}
			country_event = { id = china_events.9 hours = 8 }
		}
	}
}

country_event = { #FROM accepts alliance with ROOT
	id = china_events.8
	title = china_events.8.t
	desc = china_events.8.d
	picture = GFX_report_event_YUN_KMT_march

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.8 option china_events.8.a"
		name = china_events.8.a
		china_puppet_FROM_effect = yes
		CHI_subject_accceptance_influence_effect = yes
	}
}

country_event = { #FROM refuses alliance with ROOT
	id = china_events.9
	title = china_events.9.t
	desc = china_events.9.d
	picture = GFX_report_event_YUN_army

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.9 option china_events.9.a"
		name = china_events.9.a
		add_opinion_modifier = {
			target = FROM
			modifier = small_decrease
		}
		add_ai_strategy = {
			type = antagonize
			id = FROM
			value = 200
		}
		CHI_subject_rejection_influence_effect = yes
	}
}


##########################
### PUPPET INTEGRATION ###
##########################

country_event = { #FROM requests our integration
	id = china_events.10
	title = china_events.10.t

	desc = china_events.10.d
	
	picture = GFX_report_event_CHI_riot_police

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.10 option china_events.10.a"
		name = china_events.10.a
		ai_chance = {
			base = 0
			modifier = {
				FROM = { ROOT = { set_temp_variable = { acceptance = mtth:china_integration_acceptance_chance } } }
				always = yes
				add = var:acceptance
			}
		}
		effect_tooltip = { activate_mission = china_integration_timer }
	}

	option = {
		log = "[GetLogInfo]: event china_events.10 option china_events.10.b"
		name = china_events.10.b
		ai_chance = {
			base = 0
			modifier = {
				FROM = { ROOT = { set_temp_variable = { refusal = mtth:china_integration_refusal_chance } } }
				always = yes
				add = var:refusal
			}
		}
		hidden_effect = { remove_mission = china_integration_timer }
		if = {
			limit = { china_compatible_alignment_to_FROM = yes }
			add_stability = -0.2
			add_political_power = -200
			if = {
				limit = { china_same_alignment_as_FROM = yes }
				var:country_leader = { clear_variable = china_alignment }
			}
		}
		set_country_flag = china_revolted_against_@FROM
		create_wargoal = {
			target = FROM
			type = topple_government
		}
		china_break_puppet_effect = yes
		FROM = {
			if = {
				limit = { is_in_array = { china_possible_allies_array = ROOT } }
				remove_from_array = { china_possible_allies_array = ROOT }
			}
			if = {
				limit = { is_in_array = { china_possible_allies_array_northwest = ROOT } }
				remove_from_array = { china_possible_allies_array_northwest = ROOT }
			}
			effect_tooltip = {
				create_wargoal = {
					target = ROOT
					type = annex_everything
				}
			}
			if = {
				limit = { NOT = { any_other_country = { has_country_flag = china_revolted_against_@FROM } } }
				country_event = { id = china_events.13 hours = 8 }
			}
			else = {
				country_event = { id = china_events.15 hours = 8 }
			}
		}
	}
}

country_event = { #Overlord increases integration
	id = china_events.11
	title = china_events.11.t

	desc = china_events.11.d
	
	picture = GFX_report_event_YUN_inspection

	is_triggered_only = yes

	immediate = {
		save_event_target_as = target
	}

	option = {
		log = "[GetLogInfo]: event china_events.11 option china_events.11.a"
		name = china_events.11.a
		hidden_effect = { overlord = { country_event = china_events.12 } }
		effect_tooltip = {
			overlord = {
				add_collaboration = { target = ROOT value = 0.05 }
				china_integrate_TARGET_effect = yes
			}
		}
	}
}

country_event = { #Increased Integration of FROM
	id = china_events.12
	title = china_events.12.t

	desc = china_events.12.d
	
	picture = GFX_report_event_YUN_inspection

	is_triggered_only = yes

	immediate = {
		FROM = { save_event_target_as = target }
	}

	option = {
		log = "[GetLogInfo]: event china_events.12 option china_events.12.a"
		name = china_events.12.a
		add_collaboration = { target = FROM value = 0.05 }
		china_integrate_TARGET_effect = yes
	}
}

country_event = { #Clique refused integration
	id = china_events.13
	title = china_events.13.t
	desc = china_events.13.d
	picture = GFX_report_event_SHX_feng_advisors

	is_triggered_only = yes

	immediate = {
		set_country_flag = { flag = china_central_plains_war_might_happen days = 30 value = 1 }
	}

	option = {
		log = "[GetLogInfo]: event china_events.13 option china_events.13.a"
		name = china_events.13.a #Attack
		effect_tooltip = {
			FROM = { china_break_puppet_effect = yes }
		}
		create_wargoal = {
			target = FROM
			type = annex_everything
		}
		every_subject_country = {
			limit = {
				has_autonomy_state = kr_governorate
			}
			country_event = { id = china_events.14 days = 1 random_days = 2 }
		}
	}
}

country_event = { #FROM.FROM Revolts against FROM
	id = china_events.14
	title = china_events.14.t
	desc = china_events.14.d
	picture = GFX_report_event_SHX_feng_soldiers

	is_triggered_only = yes

	immediate = { FROM = { save_event_target_as = previous_overlord } }

	option = {
		log = "[GetLogInfo]: event china_events.14 option china_events.13.a"
		name = china_events.13.a #Side with FROM.FROM
		ai_chance = {
			base = 0
			modifier = {
				FROM = { ROOT = { set_temp_variable = { refusal = mtth:china_integration_refusal_chance } } }
				always = yes
				add = var:refusal
			}
		}
		china_break_puppet_effect = yes
		create_wargoal = {
			target = FROM
			type = annex_everything
		}
		FROM = {
			if = {
				limit = { is_in_array = { china_possible_allies_array = ROOT } }
				remove_from_array = { china_possible_allies_array = ROOT }
			}
			if = {
				limit = { is_in_array = { china_possible_allies_array_northwest = ROOT } }
				remove_from_array = { china_possible_allies_array_northwest = ROOT }
			}
			effect_tooltip = {
				create_wargoal = {
					target = ROOT
					type = annex_everything
				}
			}
			country_event = china_events.15
		}
		FROM.FROM = {
			country_event = china_events.16
		}
	}

	option = {
		log = "[GetLogInfo]: event china_events.14 option china_events.13.a"
		name = china_events.13.a #Side with FROM
		ai_chance = {
			base = 20
			modifier = {
				FROM = { ROOT = { set_temp_variable = { refusal = mtth:china_integration_acceptance_chance } } }
				always = yes
				add = var:acceptance
			}
		}
	}
}

country_event = { #Clique sides with revolter
	id = china_events.15
	title = china_events.15.t
	desc = china_events.15.d
	picture = GFX_report_event_SHX_feng_looking_in_telescope

	immediate = {
		modify_country_flag = { flag = china_central_plains_war_might_happen value = 1 }
		if = {
			limit = {
				has_country_flag = { flag = china_central_plains_war_might_happen value > 2 }
				NOT = { has_country_flag = china_central_plains_war_happened }
			}
			set_country_flag = china_central_plains_war_happened
			hidden_effect = { news_event = { id = china_events.17 days = 4 } }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.15 option china_events.15.a"
		name = china_events.15.a #Attack
		FROM = {
			effect_tooltip = {
				china_break_puppet_effect = yes
				create_wargoal = {
					target = ROOT
					type = annex_everything
				}
			}
		}
		create_wargoal = {
			target = FROM
			type = annex_everything
		}
	}
}

country_event = { #Clique sides with us
	id = china_events.16
	title = china_events.16.t
	desc = china_events.16.d
	picture = GFX_report_event_QIE_warlord_soldiers

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event china_events.16 option china_events.16.a"
		name = china_events.16.a #Attack
		china_puppet_FROM_effect = yes
	}
}

###################
### NEWS EVENTS ###
###################

news_event = { #Manchu Qing unites China
	id = china_events.300
	immediate = { log = "[GetLogInfo]: event china_events.300" }
	title = china_events.300.t
	desc = china_events.300.d
	picture = GFX_news_event_QIE_manchu_unification

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.300.a
	}
}
news_event = { #Zhili Qing unites China
	id = china_events.301
	immediate = { log = "[GetLogInfo]: event china_events.301" }
	title = china_events.301.t
	desc = china_events.301.d
	picture = GFX_news_event_QIE_wu_peifu_and_the_bois

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.301.a
	}
}
news_event = { #Zhili Republic unites China
	id = china_events.302
	immediate = { log = "[GetLogInfo]: event china_events.302" }
	title = china_events.302.t
	desc = china_events.302.d
	picture = GFX_news_event_QIE_republic_win

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.301.a
	}
}
news_event = { #Fengtian unites China
	id = china_events.303
	immediate = { log = "[GetLogInfo]: event china_events.303" }
	title = china_events.303.t
	desc = china_events.303.d
	picture = GFX_news_event_FNG_conference_success

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.303.a
	}
}
news_event = { #RNGROC unites China
	id = china_events.304
	immediate = { log = "[GetLogInfo]: event china_events.304" }
	title = china_events.304.t
	desc = china_events.304.d
	picture = GFX_news_event_japanese_parade

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.304.a
	}
}
news_event = { #Yan Xishan unites China
	id = china_events.305
	immediate = { log = "[GetLogInfo]: event china_events.305" }
	title = china_events.305.t
	desc = china_events.305.d
	picture = GFX_news_event_SHX_yan_unification

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.305.a
	}
}
news_event = { #Feng Yuxiang unites China
	id = china_events.306
	immediate = { log = "[GetLogInfo]: event china_events.306" }
	title = china_events.306.t
	desc = china_events.306.d
	picture = GFX_news_event_SHX_feng_unification

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.306.a
	}
}
news_event = { #Yiguandao unites China
	id = china_events.307
	immediate = { log = "[GetLogInfo]: event china_events.307" }
	title = china_events.307.t
	desc = china_events.307.d
	picture = GFX_news_event_SQI_yiguandao

	trigger = {
		wants_world_news = yes
	}
	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.307.a
	}
}
news_event = { #Left KMT unites China
	id = china_events.308
	immediate = { log = "[GetLogInfo]: event china_events.308" }
	title = china_events.308.t
	desc = china_events.308.d
	picture = GFX_news_event_CHI_kmt_victor

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.308.a
		trigger = { has_socialist_government = yes }
	}

	option = {
		name = china_events.308.c
		trigger = {
			has_elected_government = yes
			NOT = { original_tag = JAP }
		}
	}

	option = {
		name = china_events.308.b
		trigger = {
			has_socialist_government = no
			OR = {
				has_elected_government = no
				original_tag = JAP
			}
		}
	}
}
news_event = { #Right KMT unites China
	id = china_events.309
	immediate = { log = "[GetLogInfo]: event china_events.309" }
	title = china_events.309.t
	desc = china_events.309.d
	picture = GFX_news_event_CHI_kmt_victor

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.309.a
	}
}
news_event = { #Federalists unite China
	id = china_events.310
	immediate = { log = "[GetLogInfo]: event china_events.310" }
	title = china_events.310.t
	desc = china_events.310.d
	picture = GFX_news_event_GXC_federalist_unification

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.310.a
		trigger = { has_elected_government = yes }
	}

	option = {
		name = china_events.310.b
		trigger = { has_elected_government = no }
	}
}
news_event = { #Zhili Sichuan unites China
	id = china_events.311
	immediate = { log = "[GetLogInfo]: event china_events.311" }
	title = china_events.311.t
	desc = china_events.311.d
	picture = GFX_news_event_QIE_jiang_baili

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.311.a
	}
}
news_event = { #Federalist Sichuan unites China
	id = china_events.312
	immediate = { log = "[GetLogInfo]: event china_events.312" }
	title = china_events.312.t
	desc = china_events.312.d
	picture = GFX_news_event_GXC_federalist_government

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.312.a
	}
}
news_event = { #Liu Xiang unites China
	id = china_events.313
	immediate = { log = "[GetLogInfo]: event china_events.313" }
	title = china_events.313.t
	desc = china_events.313.d
	picture = GFX_news_event_china_unified

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.313.a
	}
}
news_event = { #Minor clique unites China
	id = china_events.314
	immediate = { log = "[GetLogInfo]: event china_events.314" }
	title = china_events.314.t
	desc = china_events.314.d
	picture = GFX_news_event_china_unified

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = no
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.314.a
	}
}
news_event = { #Wang Jingwei Holds On
	id = china_events.340
	immediate = { log = "[GetLogInfo]: event china_events.340" }
	title = china_events.340.t
	desc = china_events.340.d
	picture = GFX_news_event_CHI_wang_victory

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = yes
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.308.a
	}
}
news_event = { #Song Qingling
	id = china_events.341
	immediate = { log = "[GetLogInfo]: event china_events.341" }
	title = china_events.341.t
	desc = china_events.341.d
	picture = GFX_news_event_CHI_pac_victory

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = yes
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.341.a
	}
}
news_event = { #Chen Gongbo
	id = china_events.342
	immediate = { log = "[GetLogInfo]: event china_events.342" }
	title = china_events.342.t
	desc = china_events.342.d
	picture = GFX_news_event_CHI_chen_gongbo_victory

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = yes
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.342.a
	}
}
news_event = { #Hu Zongnan
	id = china_events.343
	immediate = { log = "[GetLogInfo]: event china_events.343" }
	title = china_events.343.t
	desc = china_events.343.d
	picture = GFX_news_event_CHI_hu_victory

	trigger = {
		wants_world_news = yes
	}

	is_triggered_only = yes

	major = yes
	fire_for_sender = yes
	show_major = {
		regional_asia_news = yes
	}

	option = {
		name = china_events.343.a
	}
}
